!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("d3-axis"),require("d3-scale"),require("d3-selection"),require("d3-time-format"),require("ramda/src/identity"),require("styled-components"),require("react-dom"),require("ramda/src/all"),require("ramda/src/equals"),require("ramda/src/or"),require("ramda/src/type"),require("ramda/src/complement"),require("ramda/src/compose"),require("d3-shape"),require("ramda/src/groupBy"),require("ramda/src/prop"),require("ramda/src/toPairs"),require("ramda/src/max"),require("ramda/src/min"),require("ramda/src/head"),require("ramda/src/filter"),require("ramda/src/sum"),require("ramda/src/map"),require("ramda/src/reduce"),require("ramda/src/values"),require("ramda/src/uniq"),require("ramda/src/cond"),require("ramda/src/T"),require("ramda/src/flatten"),require("ramda/src/mergeAll"),require("ramda/src/sortBy"),require("ramda/src/splitEvery"),require("ramda/src/last")):"function"==typeof define&&define.amd?define(["exports","react","d3-axis","d3-scale","d3-selection","d3-time-format","ramda/src/identity","styled-components","react-dom","ramda/src/all","ramda/src/equals","ramda/src/or","ramda/src/type","ramda/src/complement","ramda/src/compose","d3-shape","ramda/src/groupBy","ramda/src/prop","ramda/src/toPairs","ramda/src/max","ramda/src/min","ramda/src/head","ramda/src/filter","ramda/src/sum","ramda/src/map","ramda/src/reduce","ramda/src/values","ramda/src/uniq","ramda/src/cond","ramda/src/T","ramda/src/flatten","ramda/src/mergeAll","ramda/src/sortBy","ramda/src/splitEvery","ramda/src/last"],t):t((e=e||self).silkyCharts={},e.React,e.d3Axis,e.d3Scale,e.d3Selection,e.d3TimeFormat,e.identity,e.styled,e.ReactDOM,e.all,e.equals,e.or,e.type,e.complement,e.compose,e.d3Shape,e.groupBy,e.prop,e.toPairs,e.max,e.min,e.head,e.filter,e.sum,e.map,e.reduce,e.values,e.uniq,e.cond,e.T,e.flatten,e.mergeAll,e.sortBy,e.splitEvery,e.last)}(this,function(e,t,r,n,a,i,o,u,c,l,s,d,f,m,h,v,p,g,y,x,w,b,E,k,S,C,O,L,q,P,A,M,z,B,R){"use strict";var N="default"in t?t.default:t;function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){T(e,t,r[t])})}return e}function Y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function V(){var e=Y([""]);return V=function(){return e},e}o=o&&o.hasOwnProperty("default")?o.default:o,u=u&&u.hasOwnProperty("default")?u.default:u,l=l&&l.hasOwnProperty("default")?l.default:l,s=s&&s.hasOwnProperty("default")?s.default:s,d=d&&d.hasOwnProperty("default")?d.default:d,f=f&&f.hasOwnProperty("default")?f.default:f,m=m&&m.hasOwnProperty("default")?m.default:m,h=h&&h.hasOwnProperty("default")?h.default:h,p=p&&p.hasOwnProperty("default")?p.default:p,g=g&&g.hasOwnProperty("default")?g.default:g,y=y&&y.hasOwnProperty("default")?y.default:y,x=x&&x.hasOwnProperty("default")?x.default:x,w=w&&w.hasOwnProperty("default")?w.default:w,b=b&&b.hasOwnProperty("default")?b.default:b,E=E&&E.hasOwnProperty("default")?E.default:E,k=k&&k.hasOwnProperty("default")?k.default:k,S=S&&S.hasOwnProperty("default")?S.default:S,C=C&&C.hasOwnProperty("default")?C.default:C,O=O&&O.hasOwnProperty("default")?O.default:O,L=L&&L.hasOwnProperty("default")?L.default:L,q=q&&q.hasOwnProperty("default")?q.default:q,P=P&&P.hasOwnProperty("default")?P.default:P,A=A&&A.hasOwnProperty("default")?A.default:A,M=M&&M.hasOwnProperty("default")?M.default:M,z=z&&z.hasOwnProperty("default")?z.default:z,B=B&&B.hasOwnProperty("default")?B.default:B,R=R&&R.hasOwnProperty("default")?R.default:R;var W=u.g.attrs(function(e){var t=e.axis,r=e.position;return{className:"axis-".concat(t),transform:r&&"translate(".concat(r.x,", ").concat(r.y,")")}})(V()),I=function(e){var r=e.color,n=e.datum,a=e.height,i=e.onClick,o=e.onMouseEnter,u=e.onMouseLeave,l=e.tooltip,s=e.width,d=e.x,f=e.y,m=X(t.useState({pageX:null,pageY:null,show:!1}),2),h=m[0],v=m[1];return N.createElement(t.Fragment,null,N.createElement(Te,{chart:"bar",fillColor:r,onClick:i,onMouseEnter:function(e){v(function(e){return F({},e,{show:!0})}),o(e)},onMouseLeave:function(e){v(function(e){return F({},e,{show:!1})}),u(e)},onMouseMove:function(e){e.persist();var t=e.pageX,r=e.pageY;v(function(e){return F({},e,{pageX:t,pageY:r})})},position:{x:d,y:f},size:{width:s,height:a}}),l&&h.show&&c.createPortal(N.createElement(Ke,{pageX:h.pageX,pageY:h.pageY},N.createElement(ot,j({color:r},n))),document.body))};function H(){var e=Y(["\n  fill: ",";\n"]);return H=function(){return e},e}var _=u.circle.attrs(function(e){return{className:e.chart}})(H(),function(e){return e.color});function G(){var e=Y([""]);return G=function(){return e},e}var J=u.g.attrs({className:"dataviz-layer"})(G()),K=m(isNaN),Q=h(K,Date.parse),U=s("String"),Z=s("Date"),$=l(function(e){return d(U(f(e)),Z(f(e)))}),ee=l(Q),te=0,re=function(e){return v.stack().keys(e).order(v.stackOrderNone).offset(v.stackOffsetNone)},ne=h(y,p(g("series"))),ae=function(e,t,n,a,i,o,u){return e?r.axisBottom().scale(t).tickSize(n,0,0).ticks(o).tickFormat(""):r.axisLeft().scale(a).tickSize(-i,0,0).ticks(u).tickFormat("")},ie="rgb(255, 255, 255)",oe="rgb(230, 230, 230)",ue={monteCarlo:["rgb(8,104,172)","rgb(67,162,202)","rgb(123,204,196)","rgb(186,228,188)","rgb(240,249,232)"],vividCerise:["rgb(152,0,67)","rgb(221,28,119)","rgb(223,101,176)","rgb(215,181,216)","rgb(241,238,246)"],sundown:["rgb(122,1,119)","rgb(197,27,138)","rgb(247,104,161)","rgb(251,180,185)","rgb(254,235,226)"],madang:["rgb(0,104,55)","rgb(49,163,84)","rgb(120,198,121)","rgb(194,230,153)","rgb(255,255,204)"],curiousBlue:["rgb(37,52,148)","rgb(44,127,184)","rgb(65,182,196)","rgb(161,218,180)","rgb(255,255,204)"]},ce={white:ie,black:"rgb(33, 33, 33)",grey:oe,themes:ue},le=function(e){return b(ue[e])},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgb(0, 0, 0)",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-20;return"rgb(".concat(e.split(/\D/).filter(function(e){return e}).map(function(e){var r=parseInt(e)+t;return r>255?r=255:r<0&&(r=0),r}).join(", "),")")},de=0,fe=function(e){if(!e)return null;var t="silky-charts_".concat(e,"-").concat(de);return de+=1,t},me=function(e){return e.reduce(x,0)},he=function(e,t){var r=t.name,n=t.value;return e[r]=e[r]?[].concat(D(e[r]),[n]):[n],e},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return h(S(k),O,C(he,{}),t.length?E(function(e){var r=e.series;return t.includes(r)}):o)(e)},pe=h(L,S(g("series"))),ge={top:40,right:50,bottom:50,left:50},ye={width:0,height:0,isSizeSet:!1},xe="monteCarlo",we={curveBasis:v.curveBasis,curveBasisClosed:v.curveBasisClosed,curveBasisOpen:v.curveBasisOpen,curveBundle:v.curveBundle,curveCardinal:v.curveCardinal,curveCardinalClosed:v.curveCardinalClosed,curveCardinalOpen:v.curveCardinalOpen,curveCatmullRom:v.curveCatmullRom,curveCatmullRomClosed:v.curveCatmullRomClosed,curveCatmullRomOpen:v.curveCatmullRomOpen,curveLinear:v.curveLinear,curveLinearClosed:v.curveLinearClosed,curveMonotoneX:v.curveMonotoneX,curveMonotoneY:v.curveMonotoneY,curveNatural:v.curveNatural,curveStep:v.curveStep,curveStepAfter:v.curveStepAfter,curveStepBefore:v.curveStepBefore},be=function(e,t,r,n){var a=r.top,i=r.right,o=r.bottom,u=r.left,c=X(n.split(":"),2),l=c[0],s=c[1],d=e||640,f=t||d/l*s;return e&&t?{width:e-u-i,height:t-a-o}:{width:(e?d:f/s*l)-u-i,height:(t?f:d/l*s)-a-o}},Ee=function(e,t){var r=t<0;a.selectAll("#".concat(e," .axis-x .tick text")).attr("text-anchor",r?"end":"start").attr("transform","translate(".concat(r?-12:12,", 6) rotate(").concat(t,")"))},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return q([[s("curveBundle"),function(){return we[e].beta(t)}],[s("curveCardinalOpen"),function(){return we[e].tension(t)}],[s("curveCatmullRomOpen"),function(){return we[e].alpha(t)}],[P,function(){return we[e]}]])(e)},Se=function(e){var t,r=(t=e.map(function(e){return e.name}),$(t)&&ee(t));return[r,r?e.map(function(e){return F({},e,{name:new Date(e.name)})}):e]},Ce=function(e){return h(S(M),B(pe(e).length),S(function(e){return T({name:e.name},e.series,e.value)}),z(g("name")))(e)};function Oe(){var e=Y(["\n  path {\n    stroke: transparent;\n  }\n\n  line {\n    stroke: ",";\n  }\n"]);return Oe=function(){return e},e}var Le=u.g.attrs(function(){return{className:"grid"}})(Oe(),ce.grey);function qe(){var e=Y(["\n  text-anchor: middle;\n  transform: ",";\n"]);return qe=function(){return e},e}var Pe=u.text.attrs(function(e){var t=e.axis,r=e.margin,n=e.width,a=e.height;return{className:"".concat(t,"-axis-label"),x:"x"===t?n/2:0-a/2,y:"x"===t?a+r.bottom-30:34-r.left}})(qe(),function(e){return"y"===e.axis&&"rotate(-90deg)"}),Ae=function(e){var r=e.chart,n=e.color,a=e.d,i=e.data,o=e.onClick,u=e.onMouseEnter,l=e.onMouseLeave,s=e.tooltip,d=e.xScale,f=e.yScale,m=X(t.useState({pageX:null,pageY:null,show:!1}),2),h=m[0],v=m[1];return N.createElement(t.Fragment,null,N.createElement(Re,{chart:r,d:a,strokeColor:n}),N.createElement("g",{className:"line-dot-group"},i.map(function(e,t){var a=e.name,i=e.value;return N.createElement(_,{key:t,chart:r,color:n,cx:d(a)+d.bandwidth()/2,cy:f(i),r:6,onClick:o,onMouseEnter:function(e){v(function(e){return F({},e,{show:!0})}),u(e)},onMouseLeave:function(e){v(function(e){return F({},e,{show:!1})}),l(e)},onMouseMove:function(e){e.persist();var t=e.pageX,r=e.pageY;v(function(e){return F({},e,{name:a,pageX:t,pageY:r,value:i})})}})})),s&&h.show&&c.createPortal(N.createElement(Ke,{pageX:h.pageX,pageY:h.pageY},N.createElement(ot,{color:n,name:h.name,value:h.value})),document.body))};function Me(){var e=Y([""]);return Me=function(){return e},e}var ze=u.g.attrs(function(e){var t=e.margin,r=t.left,n=t.top;return{className:"silky-charts-container",transform:"translate(".concat(r,", ").concat(n,")")}})(Me());function Be(){var e=Y(["\n  fill: ",";\n  stroke: ",";\n  stroke-width: ",";\n  pointer-events: ","\n\n  &:hover {\n    fill: ",";\n  }\n"]);return Be=function(){return e},e}var Re=u.path.attrs(function(e){var t=e.chart;return{className:"line-path ".concat(t)}})(Be(),function(e){return e.fillColor||"none"},function(e){return e.strokeColor||"none"},3,function(e){return"bar-line"===e.chart&&"none"},function(e){var t=e.chart,r=e.fillColor;return"stacked-area"===t&&se(r)});function Ne(){var e=Y(["\n  fill: ",";\n\n  &:hover {\n    fill: ",";\n  }\n"]);return Ne=function(){return e},e}var Te=u.rect.attrs(function(e){var t=e.chart,r=e.position,n=r.x,a=r.y,i=e.size;return{className:t,height:i.height,width:i.width,x:n,y:a}})(Ne(),function(e){return e.fillColor},function(e){var t=e.fillColor;return se(t)});function je(){var e=Y(["\n  font-size: 0.8em;\n  font-style: italic;\n  text-anchor: end;\n"]);return je=function(){return e},e}function Fe(){var e=Y(["\n  text-decoration: underline;\n"]);return Fe=function(){return e},e}var Ye=u.a.attrs(function(e){return{className:"data-source-link",href:e.href,target:e.target,title:e.title}})(Fe()),Xe=u.text.attrs(function(e){var t=e.height,r=e.margin;return{className:"data-source",x:e.width,y:t+r.bottom-50}})(je()),De=function(e){var t=e.dataSource,r=e.height,n=e.margin,a=e.width;return"string"==typeof t?N.createElement(Xe,{height:r,margin:n,width:a},t):N.createElement(Ye,t,N.createElement(Xe,{height:r,margin:n,width:a},t.text))},Ve=function(e){var t=e.height,r=e.onClick,n=e.onMouseEnter,a=e.onMouseLeave,i=e.series,o=e.theme,u=e.tooltip,c=e.x,l=e.y;return i.map(function(e){return N.createElement("g",{key:e.index,className:"".concat(e.key,"-layer")},e.map(function(i,s){var d=R(i)-b(i),f=i.data.name;return N.createElement(I,{key:s,color:ce.themes[o][e.index],datum:{name:f,value:d},height:t-l(d),onClick:r,onMouseEnter:n,onMouseLeave:a,tooltip:u,width:c.bandwidth(),x:c(f),y:l(R(i))})}))})};function We(){var e=Y(["\n  height: ","px;\n  width: ","px;\n"]);return We=function(){return e},e}var Ie=u.svg.attrs(function(e){return{id:e.identifier,className:"silky-charts"}})(We(),function(e){return e.size.height},function(e){return e.size.width});function He(){var e=Y(["\n  font-size: 1.5em;\n  text-anchor: middle;\n"]);return He=function(){return e},e}var _e=u.text.attrs(function(e){var t=e.margin;return{className:"chart-title",x:e.width/2,y:50-t.top}})(He());function Ge(){var e=Y(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  box-shadow: 2px 2px 4px 0px rgba(0, 0, 0, 0.75);\n  padding: 10px;\n  pointer-events: none;\n  position: absolute;\n  text-align: center;\n  left: 0;\n  top: 0;\n  z-index: 10;\n"]);return Ge=function(){return e},e}var Je=u.div.attrs(function(e){var t=e.pageX,r=e.pageY,n=e.width,a=e.height;return{className:"silky-charts-tooltip",style:{left:"".concat(t-n/2,"px"),top:"".concat(r-a-16,"px")}}})(Ge(),ie,oe),Ke=function(e){var r=t.useRef(),n=X(t.useState({width:0,height:0}),2),a=n[0],i=n[1];return t.useEffect(function(){var e=r.current,t=e.offsetWidth,n=e.offsetHeight;i({width:t,height:n})},[r,i]),N.createElement(Je,j({ref:r},a,e),e.children)};function Qe(){var e=Y(["\n  font-size: 1.2em;\n"]);return Qe=function(){return e},e}function Ue(){var e=Y(["\n  margin-bottom: 4px;\n"]);return Ue=function(){return e},e}function Ze(){var e=Y(["\n  align-items: flex-start;\n  display: flex;\n  flex-direction: column;\n"]);return Ze=function(){return e},e}function $e(){var e=Y(["\n  background-color: ",";\n  margin-right: 10px;\n  padding: 0 4px;\n"]);return $e=function(){return e},e}function et(){var e=Y(["\n  display: flex;\n"]);return et=function(){return e},e}var tt=u.div(et()),rt=u.span($e(),function(e){return e.swatchColor||oe}),nt=u.div(Ze()),at=u.span(Ue()),it=u.span(Qe()),ot=function(e){var t=e.color,r=e.dateFormat,n=void 0===r?"%b %d, %Y":r,a=e.name,o=e.value,u=i.timeFormat(n);return N.createElement(tt,null,N.createElement(rt,{swatchColor:t}),N.createElement(nt,null,N.createElement(at,null,Q(a)?u(a):a),N.createElement(it,null,o)))},ut=function(e,r){var n,a,i,o,u,c=t.useRef(r),l=(n=r,a=250,i=[r],o=t.useRef(null).current,u=t.useCallback(n,i),t.useEffect(function(){return function(){clearTimeout(o)}},[o]),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];clearTimeout(o),o=setTimeout(function(){return u.apply(void 0,t)},a)});t.useEffect(function(){return c.current()},[c]),t.useEffect(function(){return e&&window.addEventListener("resize",l),function(){e&&window.removeEventListener("resize",l)}},[l,e])};e.Bar=function(e){var u=e.aspectRatio,c=void 0===u?"16:9":u,l=e.data,s=e.dataSource,d=e.dateFormat,f=void 0===d?"%a %d":d,m=e.grid,h=e.height,v=void 0===h?void 0:h,p=e.horizontal,g=e.margin,y=void 0===g?ge:g,x=e.onClick,w=void 0===x?o:x,b=e.onMouseEnter,E=void 0===b?o:b,k=e.onMouseLeave,S=void 0===k?o:k,C=e.responsive,O=e.theme,L=void 0===O?xe:O,q=e.title,P=e.tooltip,A=e.width,M=void 0===A?void 0:A,z=e.xAxisChartLabel,B=e.xAxisLabelRotation,R=e.xAxisLabelRotationValue,T=void 0===R?-50:R,j=e.xAxisTicks,Y=void 0===j?10:j,D=e.padding,V=void 0===D?.1:D,H=e.yAxisChartLabel,_=e.yAxisTicks,G=void 0===_?5:_,K=t.useRef(),Q=X(t.useState(fe("bar")),1)[0],U=i.timeFormat(f),Z=X(t.useState(ye),2),$=Z[0],ee=$.width,te=$.height,re=$.isSizeSet,ne=Z[1],ie=X(Se(l),2),oe=ie[0],ue=ie[1],ce=n.scaleBand().domain(ue.map(function(e){return e.name})).range([0,ee]).padding(V),se=n.scaleLinear().domain([0,me(ue.map(function(e){return e.value}))]).range([te,0]);return ut(C,function(){var e=K.current.parentElement.offsetWidth;!M&&!v||re?e!==M-(y.left+y.right)&&ne(F({},be(e,void 0,y,c),{isSizeSet:!0})):ne(F({},be(M,v,y,c),{isSizeSet:!0}))}),N.createElement(Ie,{identifier:Q,size:{width:M||ee+y.left+y.right,height:v||te+y.top+y.bottom},ref:K},N.createElement(ze,{margin:y},m&&N.createElement(Le,{ref:function(e){return a.select(e).call(ae(p,ce,te,se,ee,Y,G))}}),q&&N.createElement(_e,{margin:y,width:ee,height:te},q),z&&N.createElement(Pe,{axis:"x",margin:y,width:ee,height:te},z),H&&N.createElement(Pe,{axis:"y",margin:y,width:ee,height:te},H),s&&N.createElement(De,{dataSource:s,height:te,margin:y,width:ee}),N.createElement(J,null,ue.map(function(e,t){var r=e.name,n=e.value;return N.createElement(I,{key:t,datum:{name:r,value:n},color:le(L),x:ce(r),y:se(n),width:ce.bandwidth(),height:te-se(n),onClick:w,onMouseEnter:E,onMouseLeave:S,tooltip:P})})),N.createElement(W,{axis:"x",position:{x:0,y:te},ref:function(e){a.select(e).call(r.axisBottom(ce).ticks(Y).tickFormat(oe?U:null)),B&&Ee(Q,T)}}),N.createElement(W,{axis:"y",ref:function(e){return a.select(e).call(r.axisLeft(se).ticks(G))}})))},e.BarLine=function(e){var u=e.aspectRatio,c=void 0===u?"16:9":u,l=e.data,s=e.dataSource,d=e.dateFormat,f=void 0===d?"%a %d":d,m=e.grid,h=e.height,p=void 0===h?void 0:h,g=e.horizontal,y=e.lineSeries,x=void 0===y?[]:y,w=e.lineType,E=void 0===w?"curveLinear":w,k=e.lineTypeOption,S=void 0===k?null:k,C=e.margin,O=void 0===C?ge:C,L=e.onClick,q=void 0===L?o:L,P=e.onMouseEnter,A=void 0===P?o:P,M=e.onMouseLeave,z=void 0===M?o:M,B=e.padding,R=void 0===B?.1:B,T=e.responsive,j=e.secondaryTheme,Y=void 0===j?"vividCerise":j,D=e.stackedSeries,V=void 0===D?[]:D,I=e.theme,H=void 0===I?xe:I,_=e.title,G=e.tooltip,J=e.width,K=void 0===J?void 0:J,Q=e.xAxisChartLabel,U=e.xAxisLabelRotation,Z=e.xAxisLabelRotationValue,$=void 0===Z?-50:Z,ee=e.xAxisTicks,te=void 0===ee?10:ee,ne=e.yAxisChartLabel,ie=e.yAxisTicks,oe=void 0===ie?5:ie,ue=t.useRef(),le=X(t.useState(fe("bar-line")),1)[0],se=i.timeFormat(f),de=X(t.useState(ye),2),he=de[0],pe=he.width,we=he.height,Oe=he.isSizeSet,qe=de[1],Me=X(Se(l),2),Be=Me[0],Re=Me[1],Ne=re(V)(Ce(Re)),Te=n.scaleBand().domain(Re.map(function(e){return e.name})).range([0,pe]).padding(R),je=n.scaleLinear().domain([0,me(ve(Re,V))]).range([we,0]),Fe=v.line().curve(ke(E,S)).x(function(e){var t=e.name;return Te(t)+Te.bandwidth()/2}).y(function(e){var t=e.value;return je(t)}),Ye=function(e,t){return e.map(function(e){return t.filter(function(t){return t.series===e})})}(x,Re);return ut(T,function(){var e=ue.current.parentElement.offsetWidth;!K&&!p||Oe?e!==K-(O.left+O.right)&&qe(F({},be(e,void 0,O,c),{isSizeSet:!0})):qe(F({},be(K,p,O,c),{isSizeSet:!0}))}),N.createElement(Ie,{identifier:le,size:{width:K||pe+O.left+O.right,height:p||we+O.top+O.bottom},ref:ue},N.createElement(ze,{margin:O},m&&N.createElement(Le,{ref:function(e){return a.select(e).call(ae(g,Te,we,je,pe,te,oe))}}),_&&N.createElement(_e,{margin:O,width:pe},_),Q&&N.createElement(Pe,{axis:"x",margin:O,width:pe,height:we},Q),ne&&N.createElement(Pe,{axis:"y",margin:O,width:pe,height:we},ne),s&&N.createElement(De,{dataSource:s,height:we,margin:O,width:pe}),N.createElement(Ve,{data:Re,series:Ne,theme:H,x:Te,y:je,width:pe,height:we,onClick:q,onMouseEnter:A,onMouseLeave:z,tooltip:G}),N.createElement(W,{axis:"x",position:{x:0,y:we},ref:function(e){a.select(e).call(r.axisBottom(Te).ticks(te).tickFormat(Be?se:null)),U&&Ee(le,$)}}),N.createElement(W,{axis:"y",ref:function(e){return a.select(e).call(r.axisLeft(je).ticks(oe))}}),Ye.map(function(e,t){return N.createElement("g",{className:"".concat(b(e).series,"-layer"),key:t},N.createElement(Ae,{chart:"bar-line",data:e,color:ce.themes[Y][t],d:Fe(e),xScale:Te,yScale:je,onClick:q,onMouseEnter:A,onMouseLeave:z,tooltip:G}))})))},e.StackedArea=function(e){var u=e.aspectRatio,c=void 0===u?"16:9":u,l=e.data,s=e.dataSource,d=e.dateFormat,f=void 0===d?"%a %d":d,m=e.grid,h=e.height,p=void 0===h?void 0:h,g=e.horizontal,y=e.lineType,b=void 0===y?"curveLinear":y,E=e.lineTypeOption,k=void 0===E?null:E,S=e.margin,C=void 0===S?ge:S,O=e.onClick,L=void 0===O?o:O,q=e.onMouseEnter,P=void 0===q?o:q,A=e.onMouseLeave,M=void 0===A?o:A,z=e.responsive,B=void 0!==z&&z,R=e.theme,T=void 0===R?xe:R,j=e.title,Y=e.width,D=void 0===Y?void 0:Y,V=e.xAxisChartLabel,I=e.xAxisLabelRotation,H=e.xAxisLabelRotationValue,_=void 0===H?-50:H,G=e.xAxisTicks,J=void 0===G?10:G,K=e.yAxisChartLabel,Q=e.yAxisTicks,U=void 0===Q?5:Q,Z=t.useRef(null),$=X(t.useState(fe("stacked-area")),1)[0],ee=i.timeFormat(f),ie=X(t.useState(ye),2),oe=ie[0],ue=oe.width,le=oe.height,se=oe.isSizeSet,de=ie[1],he=X(Se(l),2),we=he[0],Oe=he[1];if(Oe=function(e,t){return e.forEach(function(e){t.forEach(function(t){e.key===t.series&&(t.stackedValues=e[te],te+=1)}),te=0}),t}(re(pe(Oe))(Ce(Oe)),Oe),!we)throw new TypeError('StackedArea charts only accept valid dates in the "name" section of the dataset.');var qe,Ae=n.scaleTime().domain((qe=Oe.map(function(e){return e.name}),[qe.reduce(w),qe.reduce(x)])).range([0,ue]),Me=n.scaleLinear().domain([0,me(ve(Oe))]).range([le,0]),Be=v.area().curve(ke(b,k)).x(function(e){var t=e.name;return Ae(t)}).y0(function(e){var t=e.stackedValues;return Me(t[0])}).y1(function(e){var t=e.stackedValues;return Me(t[1])});return ut(B,function(){var e=Z.current.parentElement.offsetWidth;!D&&!p||se?e!==D-(C.left+C.right)&&de(F({},be(e,void 0,C,c),{isSizeSet:!0})):de(F({},be(D,p,C,c),{isSizeSet:!0}))}),N.createElement(Ie,{identifier:$,size:{width:D||ue+C.left+C.right,height:p||le+C.top+C.bottom},ref:Z},N.createElement(ze,{margin:C},m&&N.createElement(Le,{ref:function(e){return a.select(e).call(ae(g,Ae,le,Me,ue,J,U))}}),j&&N.createElement(_e,{margin:C,width:ue},j),V&&N.createElement(Pe,{axis:"x",margin:C,width:ue,height:le},V),K&&N.createElement(Pe,{axis:"y",margin:C,width:ue,height:le},K),s&&N.createElement(De,{dataSource:s,height:le,margin:C,width:ue}),ne(Oe).map(function(e,t){var r,n=X(e,2),a=n[0],i=n[1];return N.createElement("g",{className:"".concat((r=a,r.replace(/ /g,"-").toLowerCase()),"-layer"),key:t},N.createElement(Re,{chart:"stacked-area",fillColor:ce.themes[T][t],d:Be(i),strokeWidth:0,onClick:L,onMouseEnter:P,onMouseLeave:M}))}),N.createElement(W,{axis:"x",position:{x:0,y:le},ref:function(e){a.select(e).call(r.axisBottom(Ae).ticks(J).tickFormat(we?ee:null)),I&&Ee($,_)}}),N.createElement(W,{axis:"y",ref:function(e){return a.select(e).call(r.axisLeft(Me).ticks(U))}})))},e.toSeries=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return A(Object.keys(e).map(function(r){return Object.entries(e[r]).reduce(function(e,n){var a=X(n,2),i=a[0],o=a[1];return t.includes(i)||e.push({name:r,series:i,value:parseInt(o)}),e},[])}))}});
