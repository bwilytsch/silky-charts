{"version":3,"file":"chunk-a266a37b.js","sources":["../src/components/Axis.js","../src/components/BarDatum.js","../src/utils/palette.js","../src/utils/constants.js","../src/components/Circle.js","../src/components/DataGroup.js","../src/utils/isValidDate.js","../src/utils/allDate.js","../src/utils/appendStackedValues.js","../src/utils/buildStack.js","../src/utils/bySeries.js","../src/utils/classify.js","../src/utils/ramdaDebounce.js","../src/utils/debounce.js","../src/utils/drawGrid.js","../src/utils/getBaseColor.js","../src/utils/getHoverColor.js","../src/utils/getId.js","../src/utils/getLength.js","../src/utils/getLineDataForSeries.js","../src/utils/getMax.js","../src/utils/getStackedMax.js","../src/utils/getSeries.js","../src/utils/getSize.js","../src/utils/getXScale.js","../src/utils/getYScale.js","../src/utils/rotateXLabels.js","../src/utils/setLineType.js","../src/utils/setupData.js","../src/utils/toSingleForm.js","../src/utils/toStackedForm.js","../src/components/Grid.js","../src/components/Label.js","../src/components/LineDatum.js","../src/components/MainGroup.js","../src/components/Path.js","../src/components/Rect.js","../src/components/Source.js","../src/components/StackedBarDatum.js","../src/components/SVG.js","../src/components/Title.js","../src/components/Tooltip.js","../src/components/TooltipItem.js"],"sourcesContent":["import styled from 'styled-components';\n\nconst Axis = styled.g.attrs(({ axis, position }) => ({\n  className: `axis-${axis}`,\n  transform: position && `translate(${position.x}, ${position.y})`,\n}))``;\n\nexport default Axis;\n","import React, { Fragment, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Rect, Tooltip, TooltipItem } from './';\n\nconst BarDatum = ({\n  color,\n  datum,\n  height,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  tooltip: withTooltip,\n  width,\n  x,\n  y,\n}) => {\n  const [tooltip, setTooltip] = useState({\n    pageX: null,\n    pageY: null,\n    show: false,\n  });\n\n  return (\n    <Fragment>\n      <Rect\n        chart=\"bar\"\n        fillColor={color}\n        onClick={onClick}\n        onMouseEnter={event => {\n          setTooltip(state => ({ ...state, show: true }));\n          onMouseEnter(event);\n        }}\n        onMouseLeave={event => {\n          setTooltip(state => ({ ...state, show: false }));\n          onMouseLeave(event);\n        }}\n        onMouseMove={event => {\n          event.persist();\n          const { pageX, pageY } = event;\n          setTooltip(state => ({ ...state, pageX, pageY }));\n        }}\n        position={{ x, y }}\n        size={{ width, height }}\n      />\n      {withTooltip &&\n        tooltip.show &&\n        createPortal(\n          <Tooltip pageX={tooltip.pageX} pageY={tooltip.pageY}>\n            <TooltipItem color={color} {...datum} />\n          </Tooltip>,\n          document.body\n        )}\n    </Fragment>\n  );\n};\n\nexport default BarDatum;\n","export const white = 'rgb(255, 255, 255)'; // #FFFFFF\nexport const black = 'rgb(33, 33, 33)'; // #212121\nexport const grey = 'rgb(220, 220, 220)'; // #DCDCDC\n\nexport const themes = {\n  monteCarlo: [\n    'rgb(8,104,172)',\n    'rgb(67,162,202)',\n    'rgb(123,204,196)',\n    'rgb(186,228,188)',\n    'rgb(240,249,232)',\n  ],\n  vividCerise: [\n    'rgb(152,0,67)',\n    'rgb(221,28,119)',\n    'rgb(223,101,176)',\n    'rgb(215,181,216)',\n    'rgb(241,238,246)',\n  ],\n  sundown: [\n    'rgb(122,1,119)',\n    'rgb(197,27,138)',\n    'rgb(247,104,161)',\n    'rgb(251,180,185)',\n    'rgb(254,235,226)',\n  ],\n  madang: [\n    'rgb(0,104,55)',\n    'rgb(49,163,84)',\n    'rgb(120,198,121)',\n    'rgb(194,230,153)',\n    'rgb(255,255,204)',\n  ],\n  curiousBlue: [\n    'rgb(37,52,148)',\n    'rgb(44,127,184)',\n    'rgb(65,182,196)',\n    'rgb(161,218,180)',\n    'rgb(255,255,204)',\n  ],\n};\n\nexport default {\n  white,\n  black,\n  grey,\n  themes,\n};\n","import {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBundle,\n  curveCardinal,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCatmullRom,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n} from 'd3-shape';\n\n// Base values\nexport const ASPECT_RATIO = '16:9';\nexport const DEBOUNCE = 100;\nexport const MARGIN = { top: 40, right: 50, bottom: 50, left: 50 };\nexport const ROTATION = -50;\nexport const SIZE = {\n  width: 0,\n  height: 0,\n  isSizeSet: false,\n};\nexport const TICKS = 5;\nexport const TIME_FORMAT = '%a %d';\nexport const TOOLTIP_DATE_FORMAT = '%b %d, %Y';\nexport const WIDTH = 640;\n\n// Scales\nexport const SCALE_BAND = 'band';\nexport const SCALE_LINEAR = 'linear';\nexport const SCALE_PADDING = 0.1;\nexport const SCALE_TIME = 'time';\n\n// Themes\nexport const THEME = 'monteCarlo';\nexport const SECONDARY_THEME = 'vividCerise';\n\n// Line options\nexport const LINE_STROKE_WIDTH = 3;\nexport const LINE_TYPE = 'curveLinear';\nexport const LINE_TYPES = {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBundle,\n  curveCardinal,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCatmullRom,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore,\n};\n","import styled from 'styled-components';\nimport { white } from '../utils/palette';\nimport { LINE_STROKE_WIDTH } from '../utils/constants';\n\nconst Circle = styled.circle.attrs(({ chart }) => ({ className: chart }))`\n  fill: ${white};\n  stroke: ${({ strokeColor }) => strokeColor};\n  stroke-width: ${LINE_STROKE_WIDTH};\n`;\n\nexport default Circle;\n","import styled from 'styled-components';\n\nconst DataGroup = styled.g.attrs({\n  className: 'dataviz-layer',\n})``;\n\nexport default DataGroup;\n","import complement from 'ramda/src/complement';\nimport compose from 'ramda/src/compose';\n\nconst isNotNaN = complement(isNaN);\n\nexport default compose(\n  isNotNaN,\n  Date.parse\n);\n","import all from 'ramda/src/all';\nimport compose from 'ramda/src/compose';\nimport equals from 'ramda/src/equals';\nimport or from 'ramda/src/or';\nimport type from 'ramda/src/type';\nimport isValidDate from './isValidDate';\n\nconst isString = equals('String');\nconst isDate = equals('Date');\nconst isStringOrDate = x => or(isString(type(x)), isDate(type(x)));\n\nconst allStringOrDate = all(isStringOrDate);\nconst allValidDate = all(isValidDate);\n\nexport default dates => allStringOrDate(dates) && allValidDate(dates);\n","let idx = 0;\n\nexport default (stack, data) => {\n  stack.forEach(values => {\n    data.forEach(datum => {\n      if (values.key === datum.series) {\n        datum.stackedValues = values[idx];\n        idx += 1;\n      }\n    });\n\n    idx = 0;\n  });\n\n  return data;\n};\n","import { stack as d3Stack, stackOffsetNone, stackOrderNone } from 'd3-shape';\n\nexport default keys =>\n  d3Stack()\n    .keys(keys)\n    .order(stackOrderNone)\n    .offset(stackOffsetNone);\n","import compose from 'ramda/src/compose';\nimport groupBy from 'ramda/src/groupBy';\nimport prop from 'ramda/src/prop';\nimport toPairs from 'ramda/src/toPairs';\n\nexport default compose(\n  toPairs,\n  groupBy(prop('series'))\n);\n","export default str => str.replace(/ /g, '-').toLowerCase();\n","import apply from 'ramda/src/apply';\nimport curry from 'ramda/src/curry';\n\n/**\n * Debounce function\n * Source: https://gist.github.com/tommmyy/daf61103d6022cd23d74c71b0e8adc0d\n *\n * @param {Boolean} immediate If true run `fn` at the start of the timeout\n * @param {Number} timeMs Debounce timeout\n * @param {Function} fn Function to debounce\n *\n * @return {Number} timeout\n * @example\n *\n *    const say = (x) => console.log(x)\n *    const debouncedSay = debounce_(false, 1000, say)();\n *\n *    debouncedSay(\"1\")\n *    debouncedSay(\"2\")\n *    debouncedSay(\"3\")\n *\n */\nconst debounce_ = curry((immediate, timeMs, fn) => () => {\n  let timeout;\n\n  return (...args) => {\n    const later = () => {\n      timeout = null;\n\n      if (!immediate) {\n        apply(fn, args);\n      }\n    };\n\n    const callNow = immediate && !timeout;\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, timeMs);\n\n    if (callNow) {\n      apply(fn, args);\n    }\n\n    return timeout;\n  };\n});\n\nexport const debounceImmediate = debounce_(true);\n\nexport const debounce = debounce_(false);\n","import {\n  debounce as ramdaDebounce,\n  debounceImmediate as ramdaDebounceImmediate,\n} from './ramdaDebounce';\nimport { DEBOUNCE } from './constants';\n\nexport const debounce = ramdaDebounce(DEBOUNCE);\nexport const debounceImmediate = ramdaDebounceImmediate(DEBOUNCE);\n","import { axisBottom as d3AxisBottom, axisLeft as d3AxisLeft } from 'd3-axis';\n\nexport default (\n  horizontal,\n  xScale,\n  height,\n  yScale,\n  width,\n  xAxisTicks,\n  yAxisTicks\n) =>\n  horizontal\n    ? d3AxisBottom()\n        .scale(xScale)\n        .tickSize(height, 0, 0)\n        .ticks(xAxisTicks)\n        .tickFormat('')\n    : d3AxisLeft()\n        .scale(yScale)\n        .tickSize(-width, 0, 0)\n        .ticks(yAxisTicks)\n        .tickFormat('');\n","import { themes } from './palette';\n\nexport default theme => themes[theme][2];\n","export default rgb =>\n  `rgb(${rgb\n    .split(/\\D/)\n    .filter(x => x)\n    .map(x => {\n      let val = parseInt(x) + -20;\n      if (val > 255) {\n        val = 255;\n      } else if (val < 0) {\n        val = 0;\n      }\n      return val;\n    })\n    .join(', ')})`;\n","let innerId = 0;\n\nexport default prefix => {\n  if (!prefix) {\n    return null;\n  }\n\n  const id = `silky-charts_${prefix}-${innerId}`;\n  innerId += 1;\n  return id;\n};\n","import compose from 'ramda/src/compose';\nimport length from 'ramda/src/length';\nimport uniq from 'ramda/src/uniq';\nimport prop from 'ramda/src/prop';\nimport map from 'ramda/src/map';\n\nexport default compose(\n  length,\n  uniq,\n  map(prop('name'))\n);\n","export default (series, data) =>\n  series.map(x => data.filter(datum => datum.series === x));\n","import max from 'ramda/src/max';\n\nexport default values => values.reduce(max, 0);\n","import compose from 'ramda/src/compose';\nimport identity from 'ramda/src/identity';\nimport filter from 'ramda/src/filter';\nimport sum from 'ramda/src/sum';\nimport map from 'ramda/src/map';\nimport reduce from 'ramda/src/reduce';\nimport values from 'ramda/src/values';\n\nconst reducer = (a, { name, value }) => {\n  a[name] = a[name] ? [...a[name], value] : [value];\n  return a;\n};\n\n/**\n * Using an optional list of series names calculate the largest possible values\n * adding the values for the series names provided plus the rest of the values\n * present in the data\n *\n * @param {Array} data Chart data\n * @param {Array} seriesList List of series names whose values will be added to\n * calculate the largest possible value\n * @returns {Array} List of calculated values\n */\nexport default (data, seriesList = []) =>\n  compose(\n    map(sum),\n    values,\n    reduce(reducer, {}),\n    seriesList.length\n      ? filter(({ series }) => seriesList.includes(series))\n      : identity\n  )(data);\n","import compose from 'ramda/src/compose';\nimport map from 'ramda/src/map';\nimport prop from 'ramda/src/prop';\nimport uniq from 'ramda/src/uniq';\n\nexport default compose(\n  uniq,\n  map(prop('series'))\n);\n","import { WIDTH } from './constants';\n\nexport default (w1, h1, { top, right, bottom, left }, r) => {\n  const [r1, r2] = r.split(':');\n  const w2 = w1 || WIDTH;\n  const h2 = h1 || (w2 / r1) * r2;\n\n  if (w1 && h1) {\n    return {\n      width: w1 - left - right,\n      height: h1 - top - bottom,\n    };\n  }\n\n  const width = w1 ? w2 : (h2 / r2) * r1;\n  const height = h1 ? h2 : (w2 / r1) * r2;\n\n  return {\n    width: width - left - right,\n    height: height - top - bottom,\n  };\n};\n","import always from 'ramda/src/always';\nimport cond from 'ramda/src/cond';\nimport equals from 'ramda/src/equals';\nimport identity from 'ramda/src/identity';\nimport T from 'ramda/src/T';\nimport { extent as d3Extent } from 'd3-array';\nimport { scaleBand as d3ScaleBand, scaleTime as d3ScaleTime } from 'd3-scale';\nimport { getLength } from './';\nimport { SCALE_TIME, SCALE_BAND } from './constants';\n\nconst timeScale = (data, width, barChart = false) => {\n  const dataLength = getLength(data); // TODO: fix this fucking length\n  const rangeWidth = width / dataLength / 1.8;\n\n  return d3ScaleTime()\n    .domain(d3Extent(data, ({ name }) => name))\n    .rangeRound(barChart ? [rangeWidth, width - rangeWidth] : [0, width]);\n};\n\nconst bandScale = (data, width) =>\n  d3ScaleBand()\n    .domain(data.map(({ name }) => name))\n    .range([0, width])\n    .padding(0.1);\n\n/**\n * Depending on the type of data we are using to represent the X axis ticks we\n * have to use a different D3 scale\n *\n * @param {String} type Type of Scale defined in the constants file\n * @param {Object} data Data\n * @param {Number} width Chart width\n * @param {Boolean} barChart Indicates if the chart use bars in order to\n * calculate the X axis path with for the time scale\n *\n * @return {Function} D3 scale function\n */\nexport default (type, data, width, barChart) =>\n  cond([\n    [equals(SCALE_TIME), always(timeScale(data, width, barChart))],\n    [equals(SCALE_BAND), always(bandScale(data, width))],\n    [(T, identity)],\n  ])(type);\n","import always from 'ramda/src/always';\nimport cond from 'ramda/src/cond';\nimport equals from 'ramda/src/equals';\nimport identity from 'ramda/src/identity';\nimport T from 'ramda/src/T';\nimport { scaleLinear as d3ScaleLinear } from 'd3-scale';\nimport { SCALE_LINEAR } from './constants';\n\nconst linearScale = (max, height) =>\n  d3ScaleLinear()\n    .domain([0, max])\n    .range([height, 0]);\n\nexport default (type, data, height) =>\n  cond([\n    [equals(SCALE_LINEAR), always(linearScale(data, height))],\n    [(T, identity)],\n  ])(type);\n","import { selectAll as d3SelectAll } from 'd3-selection';\n\n/**\n * Rotate the X axis labels to given degrees\n *\n * @param {String} id Unique chart id\n * @param {Number} deg Degrees to rotate\n */\n\nexport default (id, deg) => {\n  const isNegative = deg < 0;\n  d3SelectAll(`#${id} .axis-x .tick text`)\n    .attr('text-anchor', isNegative ? 'end' : 'start')\n    .attr('transform', `translate(${isNegative ? -12 : 12}, 6) rotate(${deg})`);\n};\n","import cond from 'ramda/src/cond';\nimport equals from 'ramda/src/equals';\nimport T from 'ramda/src/T';\nimport { LINE_TYPES } from './constants';\n\nexport default (type, option = null) =>\n  cond([\n    [equals('curveBundle'), () => LINE_TYPES[type].beta(option)],\n    [equals('curveCardinalOpen'), () => LINE_TYPES[type].tension(option)],\n    [equals('curveCatmullRomOpen'), () => LINE_TYPES[type].alpha(option)],\n    [T, () => LINE_TYPES[type]],\n  ])(type);\n","import { allDate } from './';\n\nexport default d => {\n  const isDates = allDate(d.map(({ name }) => name));\n  const data = isDates ? d.map(x => ({ ...x, name: new Date(x.name) })) : d;\n\n  return [isDates, data];\n};\n","import compose from 'ramda/src/compose';\nimport flatten from 'ramda/src/flatten';\nimport map from 'ramda/src/map';\nimport omit from 'ramda/src/omit';\nimport toPairs from 'ramda/src/toPairs';\n\nconst toSingle = datum =>\n  compose(\n    map(([series, value]) => ({ name: datum.name, series, value })),\n    toPairs,\n    omit(['name'])\n  )(datum);\n\nexport default compose(\n  flatten,\n  map(toSingle)\n);\n","import compose from 'ramda/src/compose';\nimport map from 'ramda/src/map';\nimport mergeAll from 'ramda/src/mergeAll';\nimport splitEvery from 'ramda/src/splitEvery';\nimport { getSeries } from './';\n\nexport default data =>\n  compose(\n    map(mergeAll),\n    splitEvery(getSeries(data).length),\n    map(({ name, series, value }) => ({ name, [series]: value }))\n  )(data);\n","import styled from 'styled-components';\nimport { palette } from '../utils';\n\nconst Grid = styled.g.attrs(() => ({\n  className: 'grid',\n}))`\n  path {\n    stroke: transparent;\n  }\n\n  line {\n    stroke: ${palette.grey};\n  }\n`;\n\nexport default Grid;\n","import styled from 'styled-components';\n\nconst Label = styled.text.attrs(({ axis, margin, width, height }) => ({\n  className: `${axis}-axis-label`,\n  x: axis === 'x' ? width / 2 : 0 - height / 2,\n  y: axis === 'x' ? height + margin.bottom - 30 : 34 - margin.left,\n}))`\n  text-anchor: middle;\n  transform: ${({ axis }) => axis === 'y' && 'rotate(-90deg)'};\n`;\n\nexport default Label;\n","import React, { Fragment, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Circle, Path, Tooltip, TooltipItem } from './';\n\nconst LineDatum = ({\n  chart,\n  color,\n  d,\n  data,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  tooltip: withTooltip,\n  xScale,\n  yScale,\n}) => {\n  const [tooltip, setTooltip] = useState({\n    pageX: null,\n    pageY: null,\n    show: false,\n  });\n\n  return (\n    <Fragment>\n      <Path chart={chart} d={d} className=\"line-path\" strokeColor={color} />\n      <g className=\"line-dot-group\">\n        {data.map(({ name, value }, idx) => (\n          <Circle\n            key={idx}\n            chart=\"bar-line\"\n            strokeColor={color}\n            cx={xScale(name) + xScale.bandwidth() / 2}\n            cy={yScale(value)}\n            r={4}\n            onClick={onClick}\n            onMouseEnter={event => {\n              setTooltip(state => ({ ...state, show: true }));\n              onMouseEnter(event);\n            }}\n            onMouseLeave={event => {\n              setTooltip(state => ({ ...state, show: false }));\n              onMouseLeave(event);\n            }}\n            onMouseMove={event => {\n              event.persist();\n              const { pageX, pageY } = event;\n              setTooltip(state => ({ ...state, name, pageX, pageY, value }));\n            }}\n          />\n        ))}\n      </g>\n      {withTooltip &&\n        tooltip.show &&\n        createPortal(\n          <Tooltip pageX={tooltip.pageX} pageY={tooltip.pageY}>\n            <TooltipItem\n              color={color}\n              name={tooltip.name}\n              value={tooltip.value}\n            />\n          </Tooltip>,\n          document.body\n        )}\n    </Fragment>\n  );\n};\n\nexport default LineDatum;\n","import styled from 'styled-components';\n\nconst MainGroup = styled.g.attrs(({ margin: { left, top } }) => ({\n  className: 'silky-charts-container',\n  transform: `translate(${left}, ${top})`,\n}))``;\n\nexport default MainGroup;\n","import styled from 'styled-components';\nimport { getHoverColor } from '../utils';\nimport { LINE_STROKE_WIDTH } from '../utils/constants';\n\nconst Path = styled.path.attrs(({ chart }) => ({ className: chart }))`\n  fill: ${({ fillColor }) => fillColor || 'none'};\n  stroke: ${({ strokeColor }) => strokeColor || 'none'};\n  stroke-width: ${LINE_STROKE_WIDTH};\n  pointer-events: ${({ chart }) => chart === 'bar-line' && 'none'}\n\n  &:hover {\n    fill: ${({ chart, fillColor }) =>\n      chart === 'stacked-area' && getHoverColor(fillColor)};\n  }\n`;\n\nexport default Path;\n","import styled from 'styled-components';\nimport { getHoverColor } from '../utils';\n\nconst Rect = styled.rect.attrs(\n  ({ chart, position: { x, y }, size: { height, width } }) => ({\n    className: chart,\n    height,\n    width,\n    x,\n    y,\n  })\n)`\n  fill: ${({ fillColor }) => fillColor};\n\n  &:hover {\n    fill: ${({ fillColor }) => getHoverColor(fillColor)};\n  }\n`;\n\nexport default Rect;\n","import styled from 'styled-components';\n\nconst Source = styled.text.attrs(({ height, margin, width }) => ({\n  className: `chart-source`,\n  x: width,\n  y: height + margin.bottom - 50,\n}))`\n  font-size: 0.8em;\n  font-style: italic;\n  text-anchor: end;\n`;\n\nexport default Source;\n","import React from 'react';\nimport head from 'ramda/src/head';\nimport last from 'ramda/src/last';\nimport BarDatum from './BarDatum';\nimport { palette, valueFor, getLength } from '../utils';\n\nconst StackedBarDatum = ({\n  data,\n  height,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  series,\n  theme,\n  tooltip,\n  width,\n  x,\n  y,\n}) =>\n  series.map(layer => (\n    <g key={layer.index} className={`${layer.key}-layer`}>\n      {layer.map((datum, idx) => {\n        const value = last(datum) - head(datum);\n        const name = datum.data.name;\n\n        return (\n          <BarDatum\n            key={idx}\n            color={palette.themes[theme][layer.index]}\n            datum={{ name, value }}\n            height={height - y(value)}\n            onClick={onClick}\n            onMouseEnter={onMouseEnter}\n            onMouseLeave={onMouseLeave}\n            tooltip={tooltip}\n            width={x.bandwidth()}\n            x={x(name)}\n            y={y(last(datum))}\n          />\n        );\n      })}\n    </g>\n  ));\n\nexport default StackedBarDatum;\n","import styled from 'styled-components';\n\nconst SVG = styled.svg.attrs(({ identifier }) => ({\n  id: identifier,\n  className: 'silky-charts',\n}))`\n  height: ${({ size }) => size.height}px;\n  width: ${({ size }) => size.width}px;\n`;\n\nexport default SVG;\n","import styled from 'styled-components';\n\nconst Title = styled.text.attrs(({ margin, width }) => ({\n  className: `chart-title`,\n  x: width / 2,\n  y: 50 - margin.top,\n}))`\n  font-size: 1.5em;\n  text-anchor: middle;\n`;\n\nexport default Title;\n","import React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { white, grey } from '../utils/palette';\n\nconst Container = styled.div.attrs(({ pageX, pageY, width, height }) => ({\n  className: 'silky-charts-tooltip',\n  style: {\n    left: `${pageX - width / 2}px`,\n    top: `${pageY - height - 10}px`,\n  },\n}))`\n  background-color: ${white};\n  border: 1px solid ${grey};\n  border-radius: 4px;\n  box-shadow: 2px 2px 4px 0px rgba(0, 0, 0, 0.75);\n  padding: 10px;\n  pointer-events: none;\n  position: absolute;\n  text-align: center;\n  left: 0;\n  top: 0;\n  z-index: 10;\n`;\n\nconst Tooltip = props => {\n  const tooltipRef = useRef();\n  const [size, setSize] = useState({\n    width: 0,\n    height: 0,\n  });\n\n  useEffect(() => {\n    const { offsetWidth, offsetHeight } = tooltipRef.current;\n    setSize({ width: offsetWidth, height: offsetHeight });\n  }, []);\n\n  return (\n    <Container ref={tooltipRef} {...size} {...props}>\n      {props.children}\n    </Container>\n  );\n};\n\nexport default Tooltip;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { timeFormat as d3TimeFormat } from 'd3-time-format';\nimport { isValidDate } from '../utils';\nimport { grey } from '../utils/palette';\nimport { TOOLTIP_DATE_FORMAT } from '../utils/constants';\n\nconst Container = styled.div`\n  display: flex;\n`;\n\nconst Swatch = styled.span`\n  background-color: ${({ swatchColor }) => swatchColor || grey};\n  margin-right: 10px;\n  padding: 0 4px;\n`;\n\nconst Data = styled.div`\n  align-items: flex-start;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Name = styled.span`\n  margin-bottom: 4px;\n`;\n\nconst Value = styled.span`\n  font-size: 1.2em;\n`;\n\nconst TooltipItem = ({\n  color,\n  dateFormat = TOOLTIP_DATE_FORMAT,\n  name,\n  value,\n}) => {\n  const timeFormat = d3TimeFormat(dateFormat);\n  return (\n    <Container>\n      <Swatch swatchColor={color} />\n      <Data>\n        <Name>{isValidDate(name) ? timeFormat(name) : name}</Name>\n        <Value>{value}</Value>\n      </Data>\n    </Container>\n  );\n};\n\nexport default TooltipItem;\n"],"names":["Axis","styled","g","attrs","axis","position","className","transform","x","y","BarDatum","color","datum","height","onClick","onMouseEnter","onMouseLeave","withTooltip","tooltip","width","useState","pageX","pageY","show","setTooltip","event","state","persist","createPortal","document","body","white","black","grey","themes","monteCarlo","vividCerise","sundown","madang","curiousBlue","ASPECT_RATIO","DEBOUNCE","MARGIN","top","right","bottom","left","ROTATION","SIZE","isSizeSet","TICKS","TIME_FORMAT","TOOLTIP_DATE_FORMAT","WIDTH","SCALE_BAND","SCALE_LINEAR","SCALE_PADDING","SCALE_TIME","THEME","SECONDARY_THEME","LINE_STROKE_WIDTH","LINE_TYPE","LINE_TYPES","curveBasis","curveBasisClosed","curveBasisOpen","curveBundle","curveCardinal","curveCardinalClosed","curveCardinalOpen","curveCatmullRom","curveCatmullRomClosed","curveCatmullRomOpen","curveLinear","curveLinearClosed","curveMonotoneX","curveMonotoneY","curveNatural","curveStep","curveStepAfter","curveStepBefore","Circle","circle","chart","strokeColor","DataGroup","isNotNaN","complement","isNaN","compose","Date","parse","isString","equals","isDate","isStringOrDate","or","type","allStringOrDate","all","allValidDate","isValidDate","dates","idx","stack","data","forEach","values","key","series","stackedValues","keys","d3Stack","order","stackOrderNone","offset","stackOffsetNone","toPairs","groupBy","prop","str","replace","toLowerCase","debounce_","curry","immediate","timeMs","fn","timeout","args","later","apply","callNow","clearTimeout","setTimeout","debounceImmediate","debounce","ramdaDebounce","ramdaDebounceImmediate","horizontal","xScale","yScale","xAxisTicks","yAxisTicks","d3AxisBottom","scale","tickSize","ticks","tickFormat","d3AxisLeft","theme","rgb","split","filter","map","val","parseInt","join","innerId","prefix","id","length","uniq","reduce","max","reducer","a","name","value","seriesList","sum","includes","identity","w1","h1","r","r1","r2","w2","h2","timeScale","barChart","dataLength","getLength","rangeWidth","d3ScaleTime","domain","d3Extent","rangeRound","bandScale","d3ScaleBand","range","padding","cond","always","T","linearScale","d3ScaleLinear","deg","isNegative","d3SelectAll","attr","option","beta","tension","alpha","d","isDates","allDate","toSingle","omit","flatten","mergeAll","splitEvery","getSeries","Grid","palette","Label","text","margin","LineDatum","bandwidth","MainGroup","Path","path","fillColor","getHoverColor","Rect","rect","size","Source","StackedBarDatum","layer","index","last","head","SVG","svg","identifier","Title","Container","div","style","Tooltip","props","tooltipRef","useRef","setSize","useEffect","current","offsetWidth","offsetHeight","children","Swatch","span","swatchColor","Data","Name","Value","TooltipItem","dateFormat","timeFormat","d3TimeFormat"],"mappings":"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"}